<html>
  <head>
    <title>Tes Bukalapak 2</title>
  </head>
  <body>
    <h1>Library</h1>
    <table>
      <tbody>
        <tr style="background-color: red">
          <td>Donna</td>
          <td>2016-10-01</td>
          <td></td>
        </tr>
        <tr style="background-color: red">
          <td>Nansen</td>
          <td>2016-11-05</td>
          <td>2016-11-14</td>
        </tr>
        <tr style="background-color: red">
          <td>Peppe</td>
          <td>2016-11-05</td>
          <td>2016-11-14</td>
        </tr>
        <tr>
          <td>J'Sira</td>
          <td>2012-02-28</td>
          <td>2012-03-14</td>
        </tr>
        <tr>
          <td>Billie</td>
          <td>2015-08-14</td>
          <td>2015-10-09</td>
        </tr>
        <tr>
          <td>Peyton</td>
          <td>2015-08-14</td>
          <td>2015-10-09</td>
        </tr>
      </tbody>
    </table>
  </body>
  <script type="text/javascript">
    function countInvalidColor(D, T) {
      const tr = document.querySelectorAll("tr");
      let incorrect = 0;
      const oneDay = 60 * 60 * 24 * 1000;
      tr.forEach(row => {
        const bgColor = row.style.backgroundColor;
        const returnDate = row.children[2].innerText || D;
        const borrowDate = row.children[1].innerText;
        const deltaDate = new Date(returnDate) - new Date(borrowDate);
        const isOverdue = deltaDate / oneDay > T;
        incorrect =
          (isOverdue && bgColor !== "red") || (!isOverdue && bgColor === "red")
            ? incorrect + 1
            : incorrect;
        // console.log(returnDate, borrowDate, isOverdue, bgColor, incorrect);
      });
      return incorrect;
    }
    totalInvalidColor = countInvalidColor("2016-11-30", 14);
    console.log(totalInvalidColor);
  </script>
</html>
